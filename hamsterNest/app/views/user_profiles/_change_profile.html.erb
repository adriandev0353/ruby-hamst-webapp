<div class = "change_profile_form" >

  <h2>Your Profile</h2>

  <%= form_with model: @user_profile, local: true do |form| %>

    <div class="field">
      <%= form.label :username, "User Name" %><br>
      <%= form.text_field :username, autofocus: true%>
    </div>

    <div class="field">
      <%= form.label :first_name, "First Name" %><br>
      <%= form.text_field :first_name, autofocus: true%>
    </div>

    <div class="field">
      <%= form.label :last_name, "Last Name" %><br>
      <%= form.text_field :last_name, autofocus: true%>
    </div>

    <div class="field">
      <%= form.label :birthday, "Birthday" %><br>
      <%= form.date_select :birthday, :start_year=>1900, :end_year=>Time.now.year%>
    </div>

    <div class="field">
      <%= form.file_field :avatar %>

      <% if @user_profile.avatar.attached? %>
      <%= image_tag @user_profile.avatar.variant(resize: "100x100") %>
    <% end %>
    </div>
  
    <!-- #### ADDRESS FIELD STARTS HERE #### -->
    <div class="fields">
      <%=form.fields_for :address do |a| %>
        <div class="field">
          <%= a.label :street_address, "Street address" %><br>
          <%= a.text_field :street_address, autofocus: true %>
        </div>

        <div class="field">
          <%= a.label :city, "City" %><br>
          <%= a.text_field :city, autofocus: true %>
        </div>

        <div class="field">
          <%= a.label :province_id, "Provinces"%><br>
          <%= a.collection_select :province_id, Province.order(:province), :id, :province, :selected => '1', :class => 'form-control' %>
        </div>

        <div class="field">
          <%= a.label :postal_code, "Postal Code" %><br>
          <%= a.text_field :postal_code, autofocus: true %>
        </div>
      <%end%>
    </div>
    <!-- #### ADDRESS FIELD ENDS HERE #### -->

    <div class="actions">
      <%= form.submit "Submit", :class=>"btn btn-primary"%>
    </div>
  <% end %>

</div>
