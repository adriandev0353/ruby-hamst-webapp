<h2><%=@user_name%></h2>
<h1>Items borrowed from others</h1>

<h2> Pending Requests </h2>
<% @borrow_requests.each do |borrow_request| %>
<table>
    <% if borrow_request.approval.nil?%>
        <tr>
            <td>item_name</td>
            <td>category</td>
        </tr>
        <tr>
            <td><%= borrow_request.item.item_name %></td>
            <td><%= getCategoryName(borrow_request.item.category_id) %></td>
            <td><%= borrow_request.item.status %></td>
            <td><%= link_to 'Show Request', item_borrow_request_path(:item_id=>borrow_request.item.id, :id=>borrow_request.id) %> |</td> 
            <td><%= link_to 'Show Item', user_profile_item_path(:user_profile_id=>current_user.id, :id=>borrow_request.item.id) %> | </td>
            <td><%= link_to 'Cancel Request', item_borrow_request_path(:item_id=>borrow_request.item.id, :id=>borrow_request.id),
                method: :delete,
                data: { confirm: 'Are you sure to cancel the request?'} %></td>
        </tr>
    <% end %>
</table>
<% end %>

<h2> Accpeted Requests </h2>
<% @borrow_requests.each do |borrow_request| %>
<table>
    <% if borrow_request.approval == true%>
        <tr>
            <td>item_name</td>
            <td>category</td>
        </tr>
        <tr>
            <td><%= borrow_request.item.item_name %></td>
            <td><%= getCategoryName(borrow_request.item.category_id) %></td>
            <td><%= borrow_request.item.status %></td>
            <td><%= link_to 'Show Request', item_borrow_request_path(:item_id=>borrow_request.item.id, :id=>borrow_request.id) %> |</td> 
            <td><%= link_to 'Show Item', user_profile_item_path(:user_profile_id=>current_user.id, :id=>borrow_request.item.id) %> | </td>
            
            <td><%= link_to 'Remove', item_borrow_request_path(:item_id=>borrow_request.item.id, :id=>borrow_request.id),
                method: :delete,
                data: { confirm: 'Are you sure to cancel the request?'} %></td>
        </tr>
    <% end %>
</table>
<% end %>

<h2> Rejected Requests </h2>
<% @borrow_requests.each do |borrow_request| %>
<table>
    <% if borrow_request.approval == false%>
        <tr>
            <td>item_name</td>
            <td>category</td>
        </tr>
        <tr>
            <td><%= borrow_request.item.item_name %></td>
            <td><%= getCategoryName(borrow_request.item.category_id) %></td>
            <td><%= borrow_request.item.status %></td>
            <td><%= link_to 'Show Request', item_borrow_request_path(:item_id=>borrow_request.item.id, :id=>borrow_request.id) %> |</td> 
            <td><%= link_to 'Show Item', user_profile_item_path(:user_profile_id=>current_user.id, :id=>borrow_request.item.id) %> | </td>
            <td><%= link_to 'Remove', item_borrow_request_path(:item_id=>borrow_request.item.id, :id=>borrow_request.id),
                method: :delete,
                data: { confirm: 'Are you sure to cancel the request?'} %></td>
        </tr>
    <% end %>
</table>
<% end %>

<%= link_to 'Back to Home page', root_path %>